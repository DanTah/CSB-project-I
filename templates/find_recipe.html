{% extends "layout.html" %}

{% block title %}Search recipe{% endblock %}

{% block content %}
<h2>Search recipe</h2>

<form action="/find_recipe" method="get">
  <p>
    <label for="query">Search term:</label> <input id="query" type="text" name="query">
  </p>
  <input type="submit" value="Hae">
</form>

{%if query%}
<h3>Search results:</h3>
<div class="recipe-list">
  {%for recipe in results%}
  <div class="recipe-card">
    <h3><a href = "/recipe/{{recipe.id}}">{{recipe.title}}</a></h3>
    <p>
      Written by: <a href = "user/{{recipe.user_id}}">{{recipe.username}}</a>
    </p>
    <p>
      <strong>Prep time:</strong> {{recipe.recipe_time}} minuuttia
    </p>
    {% if recipe.avg_rating %}
    <p>
      <strong>Average rating:</strong> {{recipe.avg_rating}}/5
    </p>
    {% endif %}

      {% for class, options in classes[recipe.id].items()%}
      {%for option in options%}
      <p class="classes" data-status="{{class}}">{{option}} </p>
      {%endfor%}
      {%endfor%}
    </p>
  </div>
  {%endfor%}
</div>
{%endif%}

{% endblock %}
